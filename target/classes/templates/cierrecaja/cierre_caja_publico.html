<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="master">

<body style="padding-top: 0px;" ondragstart="return false">
<main layout:fragment="contenido">
    <div class="col-12">
        <div th:classappend="'alert-' + (${clase != null} ? ${clase} : info)" th:if="${mensaje != null}"
             th:text="${mensaje}"
             class="alert">
        </div>



    <script>

    function habilitarBoton(){
    var monto = document.getElementById("idMonto").value;
    if(monto!=null&&monto!='0.0'&&monto!='0'&&monto>0&&monto!=''&&monto!='undefined'){
        document.getElementById("consultar_boton").disabled=false;
        }
    }


        function consultar()
{
            jsShowWindowLoad("Cargando...");

            setTimeout(() => {
            document.getElementById("formCierreCaja").submit();
            }, "3000");

            //document.getElementById("formCierreCaja").submit();
}

function jsShowWindowLoad(mensaje)
{
//Metodo que se Ejecuta 2

	//creamos el div que bloquea grande------------------------------------------
   var heads_var=	document.getElementsByTagName("body")[0];
   var div = document.createElement("div");
    div.id = "WindowLoad";
    //$('body', body).append(div);//window.parent.document).append(div); //---->Lo agregamos al body pero principal
heads_var.appendChild(div);

	//si no enviamos mensaje se pondra este por defecto
    if (mensaje === undefined) mensaje = "Procesando la información<br>Espere por favor";

    //centrar imagen gif
    height = 20;//El div del titulo, para que se vea mas arriba (H)
    var ancho = 0;
    var alto = 0;

     //obtenemos el ancho y alto de la ventana de nuestro navegador, compatible con todos los navegadores
    if (window.innerWidth == undefined) ancho = window.screen.width;
    else ancho = window.innerWidth;
    if (window.innerHeight == undefined) alto = window.screen.height;
    else alto = window.innerHeight;

     //operación necesaria para centrar el div que muestra el mensaje
    var heightdivsito =  alto/2 - parseInt(height)/2;//Se utiliza en el margen superior, para centrar

   //Aqui creamos el Spinner
    imgCentro = "<div style='text-align:center;height:" +  alto + "px;'>"
					+"<div  style='color:#000;margin-top:" + heightdivsito + "px; font-size:20px;font-weight:bold'>"
					+"</div>"
					+"<div class='load'>"
						+"<div class='gear one'>"
							+"<svg id='blue' viewbox='0 0 100 100' fill='#94DDFF'>"
								+"<path d='M97.6,55.7V44.3l-13.6-2.9c-0.8-3.3-2.1-6.4-3.9-9.3l7.6-11.7l-8-8L67.9,20c-2.9-1.7-6-3.1-9.3-3.9L55.7,2.4H44.3l-2.9,13.6      c-3.3,0.8-6.4,2.1-9.3,3.9l-11.7-7.6l-8,8L20,32.1c-1.7,2.9-3.1,6-3.9,9.3L2.4,44.3v11.4l13.6,2.9c0.8,3.3,2.1,6.4,3.9,9.3      l-7.6,11.7l8,8L32.1,80c2.9,1.7,6,3.1,9.3,3.9l2.9,13.6h11.4l2.9-13.6c3.3-0.8,6.4-2.1,9.3-3.9l11.7,7.6l8-8L80,67.9      c1.7-2.9,3.1-6,3.9-9.3L97.6,55.7z M50,65.6c-8.7,0-15.6-7-15.6-15.6s7-15.6,15.6-15.6s15.6,7,15.6,15.6S58.7,65.6,50,65.6z'></path>"
							+"</svg>"
						+"</div>"
						+"<div class='gear two'>"
							+"<svg id='pink' viewbox='0 0 100 100' fill='#0093e1'>"
								+"<path d='M97.6,55.7V44.3l-13.6-2.9c-0.8-3.3-2.1-6.4-3.9-9.3l7.6-11.7l-8-8L67.9,20c-2.9-1.7-6-3.1-9.3-3.9L55.7,2.4H44.3l-2.9,13.6      c-3.3,0.8-6.4,2.1-9.3,3.9l-11.7-7.6l-8,8L20,32.1c-1.7,2.9-3.1,6-3.9,9.3L2.4,44.3v11.4l13.6,2.9c0.8,3.3,2.1,6.4,3.9,9.3      l-7.6,11.7l8,8L32.1,80c2.9,1.7,6,3.1,9.3,3.9l2.9,13.6h11.4l2.9-13.6c3.3-0.8,6.4-2.1,9.3-3.9l11.7,7.6l8-8L80,67.9      c1.7-2.9,3.1-6,3.9-9.3L97.6,55.7z M50,65.6c-8.7,0-15.6-7-15.6-15.6s7-15.6,15.6-15.6s15.6,7,15.6,15.6S58.7,65.6,50,65.6z'></path>"
							+"</svg>"
						+"</div>"
						+"<div class='gear three'>"
							+"<svg id='yellow' viewbox='0 0 100 100' fill='#003f8e'>"
								+"<path d='M97.6,55.7V44.3l-13.6-2.9c-0.8-3.3-2.1-6.4-3.9-9.3l7.6-11.7l-8-8L67.9,20c-2.9-1.7-6-3.1-9.3-3.9L55.7,2.4H44.3l-2.9,13.6      c-3.3,0.8-6.4,2.1-9.3,3.9l-11.7-7.6l-8,8L20,32.1c-1.7,2.9-3.1,6-3.9,9.3L2.4,44.3v11.4l13.6,2.9c0.8,3.3,2.1,6.4,3.9,9.3      l-7.6,11.7l8,8L32.1,80c2.9,1.7,6,3.1,9.3,3.9l2.9,13.6h11.4l2.9-13.6c3.3-0.8,6.4-2.1,9.3-3.9l11.7,7.6l8-8L80,67.9      c1.7-2.9,3.1-6,3.9-9.3L97.6,55.7z M50,65.6c-8.7,0-15.6-7-15.6-15.6s7-15.6,15.6-15.6s15.6,7,15.6,15.6S58.7,65.6,50,65.6z'></path>"
							+"</svg>"
						+"</div>"
						+"<div class='lil-circle'></div>"
						+"<svg class='blur-circle'>"
							+"<filter id='blur'>"
								+"<fegaussianblur in='SourceGraphic' stddeviation='13'>"
								+"</fegaussianblur>"
							+"</filter>"
							+"<circle cx='70' cy='70' r='606' fill='transparent' stroke='#c8c8c8' stroke-width='40' filter='url(#blur)'>"
							+"</circle>"
						+"</svg>"
					+"</div>"	+ mensaje
				+"</div>";

        //creamos un input text para que el foco se plasme en este y el usuario no pueda escribir en nada de atras
        var input_var =	document.getElementById("WindowLoad");
		var input = document.createElement("input");
        input.id = "focusInput";
        input.type = "text"

	//creamos el div que bloquea grande------------------------------------------


          //asignamos el div que bloquea
       // $('#WindowLoad' , window.parent.document).append(input);
			input_var.appendChild(input);
			document.getElementById("focusInput").select();
			document.getElementById("focusInput").style.visibility = "hidden";
			document.getElementById("focusInput").style.display = "none";
          //asignamos el foco y ocultamos el input text
        //$('#focusInput' , window.parent.document).focus();
        //$('#focusInput' , window.parent.document).hide();

          //centramos el div del texto
        //$('#WindowLoad' , window.parent.document).html(imgCentro);
document.getElementById("WindowLoad").innerHTML = imgCentro;

		setTimeout(function(){ jsRemoveWindowLoad();
	/*			document.getElementById("tipo_consultaIPB3").value="B";
				document.getElementById("tipo_operacion").value="cVarios";
				document.forms[0].target = "_self";
				document.forms[0].method = "post";
				<!-- document.forms[0].action="OperacionCBTFServlet?proceso=registro_beneficiarias_consulta_pr&operacion=registro_beneficiarias_consulta_op&accion=consultar"; -->
				document.forms[0].action="CONSULTA - MANTENIMIENTO DE CTAS_DATOS DE LA CTA_PAG 2.html";
				document.forms[0].submit();*/}, 6000);
}
//-----------------------------------------------------------------------
//-----------------------------------------------------------------------

//-----Funcion para el Spiner y el div que bloquea la pantalla
//-----------------------------------------------------------------------
function jsRemoveWindowLoad()
{
//Metodo que se ejecuta 3
     // eliminamos el div que bloquea pantalla
	//$('#WindowLoad' , window.parent.document).remove
	var heads_var =	document.getElementsByTagName("body")[0];
	var input_var =	document.getElementById("WindowLoad");
	heads_var.removeChild(input_var);
}
//-----------------------------------------------------------------------
//-----------------------------------------------------------------------

    </script>


    <style>

#WindowLoad
{
    position:fixed;
    top:0px;
    left:0px;
    z-index:1000;
    filter:alpha(opacity=65);
   -moz-opacity:65;
    opacity:0.65;
    background:#c8c8c8;
	height:100%;
	width:100%;
}

.load {
  position: relative;
  margin: 50px auto;
  width: 100px;
  height: 80px;

}

.gear {
  position: absolute;
  z-index: -10;
  width: 40px;
  height: 40px;
  animation: spin 5s infinite;
}

.two {
  left: 40px;
  width: 80px;
  height: 80px;
  animation: spin-reverse 5s infinite;
}

.three {
  top: 45px;
  left: -10px;
  width: 60px;
  height: 60px;
}

@keyframes spin {
  50% {
    transform: rotate(360deg);
  }
}

@keyframes spin-reverse {
  50% {
    transform: rotate(-360deg);
  }
}


.lil-circle {
  position: absolute;
  border-radius: 50%;
  box-shadow: inset 0 0 10px 2px  rgb(155, 225, 251), 0 0 50px white;
  width: 100px;
  height: 100px;
  opacity: .65;
}

.blur-circle {
  position: absolute;
  top: -19px;
  left: -19px;
}

.text {
  color: lightgray;
  text-align: center;
}
    </style>


        <script>
            var total = 0;
            var subtotal2000 = 0;
            var subtotal1000 = 0;
            var subtotal500 = 0;
            var subtotal200 = 0;
            var subtotal100 = 0;
            var subtotal50 = 0;
            var subtotal20 = 0;
            var subtotal10 = 0;

            function recalcularTotal2000(){
                var cant2000 = document.getElementById("cant2000").value;
                if(cant2000==''){cant2000=0;}
                var billetes2000 = 2000*parseFloat(cant2000);
                subtotal2000=billetes2000;
                recalcularTotal();
                habilitarBoton();
            }
            function recalcularTotal1000(){
                var cant1000 = document.getElementById("cant1000").value;
                if(cant1000==''){cant1000=0;}
                var billetes1000 = 1000*parseFloat(cant1000);
                subtotal1000=billetes1000;
                recalcularTotal();
                habilitarBoton();
            }

            function recalcularTotal500(){
                var cant500 = document.getElementById("cant500").value;
                if(cant500==''){cant500=0;}
                var billetes500 = 500*parseFloat(cant500);
                subtotal500=billetes500;
                recalcularTotal();
                habilitarBoton();
            }

            function recalcularTotal200(){
                var cant200 = document.getElementById("cant200").value;
                if(cant200==''){cant200=0;}
                var billetes200 = 200*parseFloat(cant200);
                subtotal200=billetes200;
                recalcularTotal();
                habilitarBoton();
            }

            function recalcularTotal100(){
                var cant100 = document.getElementById("cant100").value;
                if(cant100==''){cant100=0;}
                var billetes100 = 100*parseFloat(cant100);
                subtotal100=billetes100;
                recalcularTotal();
                habilitarBoton();
            }

            function recalcularTotal50(){
                var cant50 = document.getElementById("cant50").value;
                if(cant50==''){cant50=0;}
                var billetes50 = 50*parseFloat(cant50);
                subtotal50=billetes50;
                recalcularTotal();
                habilitarBoton();
            }

            function recalcularTotal20(){
                var cant20 = document.getElementById("cant20").value;
                if(cant20==''){cant20=0;}
                var billetes20 = 20*parseFloat(cant20);
                subtotal20=billetes20;
                recalcularTotal();
                habilitarBoton();
            }

            function recalcularTotal10(){
                var cant10 = document.getElementById("cant10").value;
                if(cant10==''){cant10=0;}
                var billetes10 = 10*parseFloat(cant10);
                subtotal10=billetes10;
                recalcularTotal();
                habilitarBoton();
            }

            function recalcularTotal(){
                var total=parseFloat(subtotal2000)+parseFloat(subtotal1000)+parseFloat(subtotal500)+parseFloat(subtotal200)+parseFloat(subtotal100)+parseFloat(subtotal50)+parseFloat(subtotal20)+parseFloat(subtotal10);
                if (isNaN(total)) total = 0;
                document.getElementById("total").innerText = "Total de caja $ "+total;
                document.getElementById("idMonto").value=total;
            }

        </script>
        <h2>Cierre de Caja</h2>

        <form id="formCierreCaja" th:object="${cierreCaja}" th:action="@{/cierrecajapublico/agregar}" method="get">
            <div class="table-responsive">
            <table class="table table-bordered">
                <thead>
                <tr>
                    <th>Billetes $2000</th>
                    <th>Billetes $1000</th>
                    <th>Billetes $500</th>
                    <th>Billetes $200</th>
                    <th>Billetes $100</th>
                </tr>
                </thead>
                <tbody>
                <tr>
                    <td><input id="cant2000" placeholder="Ingrese cantidad" onchange="recalcularTotal2000()"></td>
                    <td><input id="cant1000" placeholder="Ingrese cantidad" onchange="recalcularTotal1000()"></td>
                    <td><input id="cant500" placeholder="Ingrese cantidad" onchange="recalcularTotal500()"></td>
                    <td><input id="cant200" placeholder="Ingrese cantidad" onchange="recalcularTotal200()"></td>
                    <td><input id="cant100" placeholder="Ingrese cantidad" onchange="recalcularTotal100()"></td>
                </tr>
                </tbody>
            </table>

            <table class="table table-bordered">
                <thead>
                <tr>
                    <th>Billetes $50</th>
                    <th>Billetes $20</th>
                    <th>Billetes $10</th>
                </tr>
                </thead>
                <tbody>
                <tr>
                    <td><input id="cant50" placeholder="Ingrese cantidad" onchange="recalcularTotal50()"></td>
                    <td><input id="cant20" placeholder="Ingrese cantidad" onchange="recalcularTotal20()"></td>
                    <td><input id="cant10" placeholder="Ingrese cantidad" onchange="recalcularTotal10()"></td>
                </tr>
                </tbody>
            </table>
        </div>
            <br>
            <br>
            <h3 id="total">Total de caja $0.00</h3>
            <h6>Descontar $3.000 de apertura de caja.</h6>
            <h4>Dinero fisico a entregar en sobre:</h4>
            <input id="idMonto" th:field="*{monto}" type="number" onchange="habilitarBoton();">
            <button disabled value="Consultar" id="consultar_boton" class="btn btn-success aceptar" onClick="javascript:consultar();">Cerrar Caja</button>
        </form>
    </div>
</main>
</body>
</html>